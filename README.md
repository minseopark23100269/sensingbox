# sensingbox
표정과 손 움직임을 감지해서 원하는 기능을 쓸 수 있는 영상box

이 프로젝트는 **OpenCV**와 **MediaPipe**를 기반으로 하여, 웹캠으로부터 실시간 영상을 받아 얼굴 및 손의 랜드마크를 추출한 후, 여러 가지 효과(안경, 왕관, 카툰filter, Funny Face, 표정에 따른 이모지, 확대 및 축소)를 적용하는 시스템입니다.  키보드로 조작할 필요없이 얼굴 표정 및 손짓으로 모든 효과를 체험할 수 있습니다.

## 폴더 구조

프로젝트 폴더의 구조는 다음과 같습니다:

```
sensingbox-main/
├── sensingbox.py         # 메인 파이썬 스크립트
├── images/            # 오버레이 이미지 폴더
│   ├── crown.png      # 왕관 오버레이 이미지
│   ├── glasses.png    # 안경 오버레이 이미지
│   ├── smile.png      # 웃음 효과 오버레이 이미지
│   └── zzz.png        # 눈 감은 효과 오버레이 이미지
└── output/            # 실행 시 생성됨 - 처리된 영상이 저장됩니다.
```


## 주요 기능

- **실시간 얼굴 및 손 추적:**  
  MediaPipe Face Mesh와 Hands 솔루션을 사용하여 얼굴과 손의 랜드마크를 실시간으로 추출합니다.

- **재밌는 효과:**  
  - **안경 효과:** 빨간색 트리거 원을 가리키면 얼굴에 안경이 5초간 쓸 수 있습니다. 
  - **왕관 효과:** 흰색 트리거 원을 가리키면 얼굴 상단에 왕관 이미지가 5초간 쓸 수 있습니다.
  - **카툰 효과:** 노란색 트리거 원을 가리키면 OpenCV의 스타일화 필터가 적용되어 카툰 느낌을 줍니다. 이 효과도 5초간 적용됩니다. 
  - **Funny Face 효과:** 초록색 트리거 원을 가리키면 얼굴 영역의 **눈과 입만 확대**하는 효과를 5초간 적용됩니다.
  - **Smile/Closed-eye 효과:** 얼굴 표정을 분석하여 웃을 땐 웃는 이모지, 눈을 감을 땐 조는 이모지가 나타납니다.(무표정일 땐 아무 이모지도 나타나지 않습니다.)

- **손 제스처 기반 확대/축소:**  
  전체 손이 펼쳐지면 영상의 화면이 확대되고, 주먹을 쥐면 화면이 원래 크기로 축소됩니다.

- **영상 저장:**  
  최종 처리된 영상은 상대 경로의 `output/recorded_video.avi` 파일에 저장됩니다.
  
## demo 영상
프로젝트 실행 영상:  
[![Thumbnail](https://img.youtube.com/vi/UVCQVKvOmpo/hqdefault.jpg)](https://www.youtube.com/watch?v=UVCQVKvOmpo)

## Dependencies

- Python 3.x
- [OpenCV-Python](https://pypi.org/project/opencv-python/)
- [MediaPipe](https://pypi.org/project/mediapipe/)
- [NumPy](https://pypi.org/project/numpy/)

## 설치 및 실행 방법

1. **저장소 클론 및 폴더 구조 확인:**

   ```bash
   git clone https://github.com/minseopark23100269/sensingbox.git
   cd sensingbox-main
   
2. **필요 패키지 설치:**

   ```bash
   pip install opencv-python mediapipe numpy

3. **이미지 파일 준비:**

   images/ 폴더 안에 아래 이미지 파일들이 있습니다:

   crown.png

   glasses.png

   smile.png

   zzz.png

3. **스크립트 실행:**

   ```bash
   python sensingbox.py

웹캠이 켜지면서 “Effects & Hand Zoom” 창이 열리고, 실시간 영상에 효과가 적용됩니다.
손 제스처로 확대/축소, 그리고 각 트리거 원(빨강, 흰, 노랑, 초록)을 통해 효과를 활성화시킬 수 있습니다.
ESC 키를 누르면 영상이 종료되며, output/recorded_video.avi 파일에 저장됩니다.

## 마치며

이 프로젝트는 웹캠으로 실시간 영상을 받아 얼굴과 손의 랜드마크를 추출하고,  
여러 종류의 시각 효과(안경, 왕관, 카툰, Funny Face 등)를 적용하여  
사용자가 자신의 영상에 인터랙티브한 효과를 즐길 수 있도록 기획되었습니다.  
손과 얼굴 움직임을 감지해 효과가 나타난다는 점에서 키보드를 사용할 필요가 없으니 유용하고, 속도적인 측면에서도 장점이 있으며, 
사용자가 재미를 느낄 수 있습니다.  


**노력한 점**

- **실시간 영상 처리 및 인터랙티브 효과 구현:**  
  OpenCV와 MediaPipe 라이브러리를 이용하여 얼굴과 손의 랜드마크를 실시간으로 추출하고,  
  이를 기초로 다양한 효과를 5초간 적용하는 타이머 기능을 구현했습니다.
  
- **손 제스처 기반 확대/축소 기능:**  
  손 전체의 제스처(펼침/주먹)를 인식하여 영상의 확대/축소를 부드럽게 조절하도록 하였으며,  
  사용자 경험을 향상시키는 인터랙티브 요소를 추가하는 데 주력했습니다.
  
- **효과 트리거 및 오버레이 관리:**  
  화면 상단에 4개의 트리거 원(빨강, 흰, 노랑, 초록)을 배치해 각 효과를 명확하게 구분하고,  
  효과들이 정확한 위치(안경은 눈에, 왕관은 머리에, funny face는 눈과 입에) 에서 작동되도록 노력했습니다.

- **얼굴 움직임 기반 효과:**
    웃을 땐 웃는 이모지 2개가 나타나고, 눈을 감을 땐 조는 이모지 2개가 나타납니다.
    얼굴움직임에 따라 바로바로 이모지가 나타나게 하도록 노력했습니다.  

**아쉬운 점**
 
효과를 실행할 때 지연이 조금씩 나타난다는 점이 아쉬웠습니다. 특히 카툰 filter를 적용할 때 지연이 가장 심한 느낌이었습니다. 
funny face효과도 좀 더 화질이 선명하게 보이도록 하면 좋을 거 같은데 그러지 못한 점이 아쉬웠습니다. 
3d캐릭터를 화면에 나타낼 수 있는 기능, 메이크업이 되는 기능을 넣어서 사용자가 더 재미를 느낄 수 있도록 프로젝트를 발전시키고 싶습니다. 
  



